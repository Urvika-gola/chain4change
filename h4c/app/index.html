<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>


    <script src="web3.min.js"></script>

</head>
<body>


    
  <!-- Interaction with the blockchain -->
  <!--  <script src="h4c-sol-connection.js"></script> -->

    <script>
        
var urldata;
web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
        var diamondLedger = new web3.eth.Contract([{"constant":false,"inputs":[{"name":"_id","type":"uint256"},{"name":"_reportNumber","type":"uint256"},{"name":"_miles_travelled","type":"uint256"},{"name":"_weight","type":"int256"},{"name":"_mine_location","type":"int256"},{"name":"_loc_1","type":"int256"},{"name":"_loc_2","type":"int256"},{"name":"_loc_3","type":"int256"},{"name":"_loc_4","type":"int256"},{"name":"_footprint","type":"int256"}],"name":"createDiamond","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_id","type":"uint256"}],"name":"getGHGFootprint","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"}],"0x9c0329B6C3865F9c28e193fDae952Aa7787Cf3F8");
        urldata = parseInt((window.location.search.substr(1).split("=")[1])); 
        console.log(urldata);
        /* web3.eth.getAccounts().then(function(accounts){
          const Diamond = diamondLedger.deploy({
              data: "6060604052341561000f57600080fd5b6102298061001e6000396000f30060606040526004361061004c576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806302d394a114610051578063c6323e46146100dd575b600080fd5b341561005c57600080fd5b6100c36004808035906020019091908035906020019091908035906020019091908035906020019091908035906020019091908035906020019091908035906020019091908035906020019091908035906020019091908035906020019091905050610114565b604051808215151515815260200191505060405180910390f35b34156100e857600080fd5b6100fe60048080359060200190919050506101d9565b6040518082815260200191505060405180910390f35b6000610120604051908101604052808b81526020018a8152602001898152602001888152602001878152602001868152602001858152602001848152602001838152506000808d8152602001908152602001600020600082015181600001556020820151816001015560408201518160020155606082015181600301556080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080155905050600190509a9950505050505050505050565b600080600080848152602001908152602001600020600801549050809150509190505600a165627a7a72305820b413547ab6e41d4b8e54b1295410e9ab076ba311ff4542765c1e314c5190581e0029",
          }).send({
              from: accounts[0],
              gas: 1500000,
              gasPrice: "30000000000000"
          }, function(error, transactionHash) {
              if(error) {console.log(error)}
              console.log(transactionHash)
          }).on('receipt', function(receipt){
              console.log(receipt)
          })
        })
        */
        
        

       // contractInstance = diamondLedger.at("0x4fD256996e62f208Aac20dbA34b097D71c4bD90f")

    
web3.eth.getAccounts().then(function(accounts){
           
   var m;
    diamondLedger.methods.getGHGFootprint(2).call({from:accounts[0]}).then(function(receipt){
        console.log("asd",receipt);
        m = parseInt(receipt);
         document.body.innerHTML= m;

    })
    

    
    
})
       
 
  
    </script>

</body>
</html>
